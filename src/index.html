<!DOCTYPE html>
<html lang="en" class="jeff0">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta http-equiv="X-UA-Compatible" content="ie=edge" />
    <title>Jeffsum | A Homage</title>
    <link rel="stylesheet" href="./styles/main.pcss" />
  </head>
  <body>
    <div class="app">
      <div class="app__header">
        <div class="app__header__content">
          <figure class="header__jeffs">
            <img src="./img/jeff1.jpg" alt="Sweater Jeff" />
            <img src="./img/jeff2.jpg" alt="Cardigan Jeff" />
            <img src="./img/jeff3.jpg" alt="Polka Jeff" />
          </figure>
          <div class="header__words">
            <p class="credit">
              <span>You made this?</span>
              <a href="https://www.twitter.com/seanehalpin">He made this.</a>
            </p>
            <div class="description">
              <h1 class="description__title">Jeffsum.</h1>
              <p class="description__strapline">
                A little text placeholder generator of Jeff Goldblum
                awesomeness.
              </p>
            </div>
          </div>
        </div>
      </div>
      <main class="app__content">
        <form class="jeffness">
          <label class="jeffness__label">
            Gimme like
            <input
              class="jeffness__input"
              type="number"
              name="paragraphs"
              value="5"
            />
            <span>paragraphs of that Jeffness.</span>
          </label>
          <button class="jeffness__btn">Receive the Jeff.</button>
        </form>
      </main>
    </div>

    <div id="acknowledgements" class="acknowledgements">
      <div class="acknowledgements__content message">
        <p>
          This is just an experiment in using web technologies to make authoring
          animated interfaces more declarative and performant.
        </p>
        <p>
          For the source of its inspiration, design and the
          <strong>real</strong> jeffness you should, uh, go
          <a href="http://jeffsum.com">here</a>
        </p>
        <p><a href="#">back up</a></p>
      </div>
    </div>

    <!-- Templates -->
    <template id="template-feature">
      <li class="feature">
        <span class="feature__icon">
          <svg><use xlink:href="#icon-supported"></use></svg>
        </span>
        <span class="feature__label"></span>
      </li>
    </template>

    <template id="template-feature-unsupported">
      <li class="feature">
        <span class="feature__icon feature__icon--unsupported">
          <svg><use xlink:href="#icon-unsupported"></use></svg>
        </span>
        <span class="feature__label"></span>
      </li>
    </template>

    <template id="template-warning">
      <link rel="stylesheet" href="./styles/fallback.pcss" />
      <div class="warning">
        <div class="warning__content message">
          <img
            class="warning__content__jeff"
            src="./img/jeffnone.jpg"
            alt="Concerned Jeff"
          />
          <p>
            If Jeff looks concerned it's because this demo requires support for
            these features:
          </p>
          <ul class="warning__features"></ul>
          <p>
            Either use Chrome Canary (currently Chrome 73) or enable
            experimental features in Chrome Stable, Firefox or Safari.
          </p>
        </div>
      </div>

      <svg class="hidden" xmlns="http://www.w3.org/2000/svg">
        <symbol id="icon-supported" viewBox="0 0 1024 1024">
          <path
            d="M760 380.4l-61.6-61.6-263.2 263.1-109.6-109.5L264 534l171.2 171.2L760 380.4z"
          />
        </symbol>
        <symbol id="icon-unsupported" viewBox="0 0 1024 1024">
          <path
            d="M697.4 759.2l61.8-61.8L573.8 512l185.4-185.4-61.8-61.8L512 450.2 326.6 264.8l-61.8 61.8L450.2 512 264.8 697.4l61.8 61.8L512 573.8z"
          />
        </symbol>
      </svg>
    </template>

    <script>
      const features = [
        ["animate", document.querySelector(":root"), "Web Animation API"],
        ["registerProperty", CSS, "CSS Properties and Values API"],
        ["CSSUnitValue", window, "Typed OM"]
      ].reduce((acc, [prop, obj, label]) => {
        const feature = { label, enabled: prop in obj };
        return [...acc, feature];
      }, []);

      if (features.every(f => f.enabled)) {
        CSS.registerProperty({
          name: "--gradientLeft",
          syntax: "<color>",
          initialValue: "#61BFD9",
          inherits: true
        });
        CSS.registerProperty({
          name: "--gradientRight",
          syntax: "<color>",
          initialValue: "#0551B4",
          inherits: true
        });
      } else {
        const t = document.querySelector("#template-warning");
        const clone = document.importNode(t.content, true);
        const list = clone.querySelector(".warning__features");

        features.forEach(f => {
          const s = f.enabled
            ? "#template-feature"
            : "#template-feature-unsupported";

          const template = document.querySelector(s);
          const item = document.importNode(template.content, true);
          const label = item.querySelector(".feature__label");

          label.textContent = f.label;
          list.appendChild(item);
        });

        document.querySelector(":root").classList.add("no-support");
        document.querySelector("body").appendChild(clone);
      }
    </script>
    <script src="./js/index.js"></script>
  </body>
</html>
